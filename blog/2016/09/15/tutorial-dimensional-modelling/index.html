
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tutorial: Dimensional Modelling - Personal Interview Notes</title>
  <meta name="author" content="Cuong Dong-Si">

  
  <meta name="description" content="From Kimball group reader. Design items:
You need to do data profiling to keep data processed to min. One way to profile data changes is to use CDC &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tdongsi.github.io/SqlTests/blog/2016/09/15/tutorial-dimensional-modelling/">
  <link href="/SqlTests/favicon.png" rel="icon">
  <link href="/SqlTests/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Personal Interview Notes" type="application/atom+xml">
  <script src="/SqlTests/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/SqlTests/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/SqlTests/">Personal Interview Notes</a></h1>
  
    <h2>Neither success or failure is ever final.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="tdongsi.github.io/SqlTests">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/SqlTests/">Blog Home</a></li>
  <li><a href="/SqlTests/blog/archives">Archives</a></li>
  <li><a href="/SqlTests/syllabus">Syllabus</a></li>
  <li><a href="http://tdongsi.github.io">Personal Home</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Tutorial: Dimensional Modelling</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-15T15:38:20-07:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:38 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>From Kimball group reader.</p>

<!--more-->


<p>Design items:
You need to do data profiling to keep data processed to min. One way to profile data changes is to use CDC column.
Check CDC columns: e.g. last_update_ts. If CDC columns are not available, work with production system DBA to add one.
Otherwise, check application log file/Message traffic.</p>

<p>Item 1.5
Divide data into dimension and fact tables: 90% of the time the division is obvious.</p>

<pre><code>* Dimensions: static entities in the environment
* 
    * Text descriptions are obvious data going into dimension

* Facts: numeric observations/measurements.
* 
    * Unpredictable, numeric numbers are the usual suspects.
</code></pre>

<p>Grain of fact table = a measurement in physical, real-world.</p>

<p>Design steps:</p>

<pre><code>* Determine the single physical event you want to record -&gt; fact table. Other details will follow in dimension tables.
* 
    * What event is a single row in fact table representing? E.g. for fact_sale_event, the grain is literally the beep of the scanner.

* Strive to make facts additive.
* 
    * E.g.: Sale event can go into fact table as (price, unit), but the information (sale amount, unit) contains the same information but better since sale amount (aka extended price) = price * unit.

* Some data can be in both. The goal is ease of use, not methodology correctness.
* 
    * E.g.: Coverage amount of insurance policies can be in both dim_coverage and fact_sale_event. 
</code></pre>

<p>Item 1.6
Bus matrix to communicate/manage dimension tables.</p>

<p>TODO: Table of bus matrix</p>

<p>Item 1.8 Slow Changing Dimensions
Type 0: Constant. Ignore changes.
Type 1: Simple overwrite (best used for error correction).
Type 2: Create another row and save history.
The standard implementation is: surrogate key (PK), durable ID, … attributes …, effective_start_date, effective_end_date, change_reason, current_flag.</p>

<p>Type 3: Create another column for alternate info.</p>

<p>Item 1.10. Fact tables
Data warehouse is built on fact tables expressed at the lowest possible grain.
Higher grain aggregated tables such as category sales by district.
Three kinds of fact tables:</p>

<pre><code>1. Transaction Grain: corresponds to a measurement taken at a single instant.
    1. Unpredictably sparse or dense.
    2. Can be enormous. Cannot guarantee all possible foreign keys represented.
    3. E.g.: fact_qbo_subscription_event

2. Periodic Snapshot Grain: corresponds to a predefined span of time.
    1. Predictably dense.
    2. Can be large even there is no activity.
    3. E.g.: Account balance for an account at some time.

3. Accumulating Snapshot Grain.
    1. Fact entries are overwritten and udpated.
    2. E.g.: Order processing
</code></pre>

<p>Surrogate Keys (integer key, assigned in sequence) are recommended for Fact tables.
In Vertica, CREATE SEQUENCE.</p>

<p>Item 4.1
Too smart interviewers make it harder to extract requirements from business:</p>

<pre><code>* Long-winded questions
* Even worse, some questions box the interviewee into a corner because of some bias. And the interviewees do not know how to get out.
* 
    * Just ask and listen. Let them guide you step by step.
</code></pre>

<p>Item 5.1-5.3: Compare normalized modeling (3NF) vs dimensional modeling (DM)
Why dimensional modeling over normalized modeling?</p>

<pre><code>1. Normalized modeling is intended for transactional databases, making update and delete efficient. It’s not needed in BI/DW.
2. Normalized modeling for a complex business process will result in a very large ER diagram (similar to US cities-freeway maps). Business users cannot simply use that diagram to query what they need to know.
    1. The result ER is usually overwhelming and cannot be viewed in its entirety.
    2. E.g.: How to drive from SJ to NY? Maybe going to Sacramento through 580, then to Salt Lake City, and then what? Similarly, you need to know which table to join.
    3. In the same analogy, it’s actually worse to join the tables since the tables are not static, they are moving cities.
</code></pre>

<p>Dimensional Modeling: top-down design process.</p>

<pre><code>* each fact table represents a business process.
* Support two operations: browse and multi-table joins.
* It is important to keep the dimension tables flat, without being normalized into snowflake structure.
</code></pre>

<h3>Questions</h3>

<p><a href="http://learndatamodeling.com/blog/data-modeling-interview-questions/">http://learndatamodeling.com/blog/data-modeling-interview-questions/</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Cuong Dong-Si</span></span>

      




<time class='entry-date' datetime='2016-09-15T15:38:20-07:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>3:38 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/SqlTests/blog/categories/database/'>database</a>, <a class='category' href='/SqlTests/blog/categories/facebook/'>facebook</a>, <a class='category' href='/SqlTests/blog/categories/todo/'>todo</a>, <a class='category' href='/SqlTests/blog/categories/tutorial/'>tutorial</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://tdongsi.github.io/SqlTests/blog/2016/09/15/tutorial-dimensional-modelling/" data-via="" data-counturl="http://tdongsi.github.io/SqlTests/blog/2016/09/15/tutorial-dimensional-modelling/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/SqlTests/blog/2016/09/14/system-design-questions/" title="Previous Post: System Design questions">&laquo; System Design questions</a>
      
      
        <a class="basic-alignment right" href="/SqlTests/blog/2016/09/16/tutorial-dashboard-for-business-analytics/" title="Next Post: Tutorial: Dashboard for Business Analytics">Tutorial: Dashboard for Business Analytics &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
    <h1>About This Blog</h1>
    <p>Random interview experience and lessons.</p>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/16/tutorial-dashboard-for-business-analytics/">Tutorial: Dashboard for Business Analytics</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/15/tutorial-dimensional-modelling/">Tutorial: Dimensional Modelling</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/14/system-design-questions/">System Design Questions</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/13/network-question-bank/">Network Question Bank</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/12/database-question-bank/">Database Question Bank</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/11/tutorial-bit-manipulation/">Questions: Bit Manipulation</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/07/questions-operating-system-drills/">Questions: Operating System Drills</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/06/tutorial-process-synchronization/">Tutorial: Process Synchronization</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/04/tutorial-estimation-theory/">Tutorial: Estimation Theory</a>
      </li>
    
      <li class="post">
        <a href="/SqlTests/blog/2016/09/03/question-bank/">Glassdoor: Algorithm Question Bank</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/SqlTests/blog/categories/algorithm/'>algorithm (2)</a></li><li><a href='/SqlTests/blog/categories/apple/'>apple (1)</a></li><li><a href='/SqlTests/blog/categories/database/'>database (3)</a></li><li><a href='/SqlTests/blog/categories/facebook/'>facebook (5)</a></li><li><a href='/SqlTests/blog/categories/google/'>google (1)</a></li><li><a href='/SqlTests/blog/categories/java/'>java (2)</a></li><li><a href='/SqlTests/blog/categories/javascript/'>javascript (1)</a></li><li><a href='/SqlTests/blog/categories/math/'>math (1)</a></li><li><a href='/SqlTests/blog/categories/mysql/'>mysql (1)</a></li><li><a href='/SqlTests/blog/categories/network/'>network (1)</a></li><li><a href='/SqlTests/blog/categories/os/'>os (2)</a></li><li><a href='/SqlTests/blog/categories/python/'>python (1)</a></li><li><a href='/SqlTests/blog/categories/questions/'>questions (8)</a></li><li><a href='/SqlTests/blog/categories/salesforce/'>salesforce (1)</a></li><li><a href='/SqlTests/blog/categories/sql/'>sql (2)</a></li><li><a href='/SqlTests/blog/categories/systemdesign/'>systemdesign (1)</a></li><li><a href='/SqlTests/blog/categories/testing/'>testing (1)</a></li><li><a href='/SqlTests/blog/categories/todo/'>todo (6)</a></li><li><a href='/SqlTests/blog/categories/tutorial/'>tutorial (7)</a></li></ul>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Cuong Dong-Si -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
